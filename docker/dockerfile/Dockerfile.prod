FROM node:18-alpine as builder

WORKDIR /var/www/html

COPY package*.json ./
RUN npm install
RUN npm ci --only=production

COPY .. .

RUN npm run build && npm install -g serve

CMD [ "serve", "-s", "build" ]